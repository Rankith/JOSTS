{% extends "app/layout.html" %}

{% block content %}
{% load staticfiles %}

<div class="row text-base">
    
    <div class="col-6">
        <div class="d-flex">
            <div id="divVidList" class="pr-1" style="overflow:auto;">

                {% for video in videos %}
                <div id="divVideo{{ video.id }}" onclick="VideoClick({{ video.id }},'{{ video.file }}',this)" style="cursor:pointer" class="video-select">{{ video.id }}</div>
                {% endfor %}
               
            </div>
            <div style="flex-grow:1" class="pl-2">
                <div>{% include "app/video.html" %}</div>
                <div class="row pt-2">
                    <div class="col-6">
                        <div class="form-group">
                            <select class="selectpicker form-control" data-live-search="true" data-size="8" data-header="Select an element" title="Select an element">
                                {% for element in elements %}
                                {% ifchanged element.element.str_grp %}
                                {% if not forloop.first %}
                                </optgroup>
                                {% endif %}
                                <optgroup label="Group {{ element.element.str_grp }}">
                                    {% endifchanged %}
                                    <option value="{{ element.element.id }}" data-subtext="{{ element.element.letter_value }}">{{ element.id_number_text }} | {{ element.short_text }}</option>
                                    {% if forloop.last %}
                                </optgroup>
                                {% endif %}
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                    <div class="col-6">
                        <button id="btnAddElement" type="button" class="btn btn-main" onclick="">Add Element</button>
                        <button id="btnUpdateElement" type="button" class="btn btn-main" onclick="">Update Element</button>
                    </div>
                </div>

                <div class="row">
                    <div class="col-6">
                        <div class="form-group">
                            <select class="selectpicker form-control" data-live-search="true" data-size="8" data-header="Select a deduction" title="Select a deduction">
                                {% for rule in rules %}

                                <option value="{{ rule.id }}" data-subtext="{{ rule.deduction_amount }}">{{ rule.text }}</option>

                                {% endfor %}
                            </select>
                        </div>
                    </div>
                    <div class="col-6">
                        <button id="btnAddDeduction" type="button" class="btn btn-main" onclick="">Add Deduction</button>
                        <button id="btnUpdateDeduction" type="button" class="btn btn-main" onclick="">Update Deduction</button>
                    </div>
                </div>

                <div class="row">
                    <div class="col-6">
                        <div class="form-group">
                            <select class="selectpicker form-control" data-live-search="true" data-size="8" data-header="Select an unrated element" title="Select an unrated element">
                                
                            </select>
                        </div>
                    </div>
                    <div class="col-6">
                        <button id="btnAddUnrated" type="button" class="btn btn-main" onclick="">Add Unrated</button>
                        <button id="btnUpdateUnrated" type="button" class="btn btn-main" onclick="">Update Unrated</button>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>

{% endblock %}
{% block scripts %}

<script type="text/javascript">
    var SourceBase = "{% static 'app/videos/wag/' %}{{ event }}/";

</script>
<script src="{% static 'app/scripts/video_player.js' %}"></script>
<script type="text/javascript">
    $(document).ready(function () {
        //$('.selectpicker').selectpicker();
    });
    $("#divMain").removeClass("container").addClass("container-fluid");
    $("#divVideoContainer").css("height", "480px");
    $("#VideoPlayer").removeClass("vjs-16-9").addClass("vjs-fill");//.css("height", "480px").css("width", "853px");
    $("#divVidList").css("height", window.innerHeight - 56);
    ShowVideoFrames();
    function VideoClick(idIn, fileIn,el) {

        //console.log(SourceBase + fileIn);
        ShowVideo(idIn, fileIn);
        $(".video-select").removeClass("div-selected");
        $(el).addClass("div-selected");
        }

    function UpdateFrameCalled() {

        $("CurFrame").html("Frame: " + CurFrame);
    }
</script>
{% endblock %}